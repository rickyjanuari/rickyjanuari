import{S as L,i as U,s as z,e as v,k as B,w as M,$ as F,c as j,d as u,m as E,x as b,b as h,H as c,g as y,y as q,q as A,o as T,B as H,t as d,a as G,h as w,j as S}from"../../../chunks/vendor-b62d7b9b.js";import{f as I}from"../../../chunks/fetchPosts-383f5e14.js";import{P as K}from"../../../chunks/PostList-5ba61222.js";import{M as N}from"../../../chunks/Main-f748586d.js";import{P as D}from"../../../chunks/Pagination-4f56842f.js";import"../../../chunks/preload-helper-510846e5.js";import"../../../chunks/TagList-bde82414.js";import"../../../chunks/ExternalLink-10e1f92c.js";function O(o){let s,n,m,l,p,i,f,e,r,$,g,k,_,P;return r=new D({props:{currentPage:o[1],totalPosts:o[2]}}),g=new K({props:{posts:o[0]}}),_=new D({props:{currentPage:o[1],totalPosts:o[2]}}),{c(){s=v("h1"),n=d("Posts "),m=d(o[4]),l=d("\u2013"),p=d(o[3]),i=d(" of "),f=d(o[2]),e=B(),M(r.$$.fragment),$=B(),M(g.$$.fragment),k=B(),M(_.$$.fragment),this.h()},l(t){s=j(t,"H1",{class:!0});var a=G(s);n=w(a,"Posts "),m=w(a,o[4]),l=w(a,"\u2013"),p=w(a,o[3]),i=w(a," of "),f=w(a,o[2]),a.forEach(u),e=E(t),b(r.$$.fragment,t),$=E(t),b(g.$$.fragment,t),k=E(t),b(_.$$.fragment,t),this.h()},h(){h(s,"class","h2 svelte-1vo22i3")},m(t,a){y(t,s,a),c(s,n),c(s,m),c(s,l),c(s,p),c(s,i),c(s,f),y(t,e,a),q(r,t,a),y(t,$,a),q(g,t,a),y(t,k,a),q(_,t,a),P=!0},p(t,a){(!P||a&16)&&S(m,t[4]),(!P||a&8)&&S(p,t[3]),(!P||a&4)&&S(f,t[2]);const J={};a&2&&(J.currentPage=t[1]),a&4&&(J.totalPosts=t[2]),r.$set(J);const C={};a&1&&(C.posts=t[0]),g.$set(C);const R={};a&2&&(R.currentPage=t[1]),a&4&&(R.totalPosts=t[2]),_.$set(R)},i(t){P||(A(r.$$.fragment,t),A(g.$$.fragment,t),A(_.$$.fragment,t),P=!0)},o(t){T(r.$$.fragment,t),T(g.$$.fragment,t),T(_.$$.fragment,t),P=!1},d(t){t&&u(s),t&&u(e),H(r,t),t&&u($),H(g,t),t&&u(k),H(_,t)}}}function Q(o){let s,n,m,l,p,i,f;return document.title=s="Ricky Januari | Blog page "+o[1],i=new N({props:{$$slots:{default:[O]},$$scope:{ctx:o}}}),{c(){n=v("meta"),m=v("meta"),l=v("meta"),p=B(),M(i.$$.fragment),this.h()},l(e){const r=F('[data-svelte="svelte-cm5k0v"]',document.head);n=j(r,"META",{"data-key":!0,name:!0,content:!0}),m=j(r,"META",{property:!0,content:!0}),l=j(r,"META",{name:!0,content:!0}),r.forEach(u),p=E(e),b(i.$$.fragment,e),this.h()},h(){h(n,"data-key","description"),h(n,"name","description"),h(n,"content","Past posts on the web, development, and design."),h(m,"property","og:image"),h(m,"content","https://rickyjanuari.com/images/site-image.png"),h(l,"name","twitter:image"),h(l,"content","https://rickyjanuari.com/images/site-image.png")},m(e,r){c(document.head,n),c(document.head,m),c(document.head,l),y(e,p,r),q(i,e,r),f=!0},p(e,[r]){(!f||r&2)&&s!==(s="Ricky Januari | Blog page "+e[1])&&(document.title=s);const $={};r&63&&($.$$scope={dirty:r,ctx:e}),i.$set($)},i(e){f||(A(i.$$.fragment,e),f=!0)},o(e){T(i.$$.fragment,e),f=!1},d(e){u(n),u(m),u(l),e&&u(p),H(i,e)}}}const at=async({fetch:o,params:s})=>{try{const n=s.page?s.page:1;if(n<=1)return{status:301,redirect:"/blog"};let m=n*10-10;const l=await I({offset:m,limit:10}),p=await o("/api/posts/count.json"),{total:i}=await p.json();return{status:200,props:{posts:l,page:n,totalPosts:i}}}catch(n){return{status:404,error:n.message}}};function V(o,s,n){let m,l,{posts:p}=s,{page:i=1}=s,{totalPosts:f}=s;return o.$$set=e=>{"posts"in e&&n(0,p=e.posts),"page"in e&&n(1,i=e.page),"totalPosts"in e&&n(2,f=e.totalPosts)},o.$$.update=()=>{o.$$.dirty&2&&n(4,m=i*10-9||1),o.$$.dirty&6&&n(3,l=Math.min(i*10,f))},[p,i,f,l,m]}class nt extends L{constructor(s){super();U(this,s,V,Q,z,{posts:0,page:1,totalPosts:2})}}export{nt as default,at as load};
